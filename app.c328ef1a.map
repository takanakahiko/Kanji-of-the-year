{"version":3,"sources":["script/sub_modules/util.ts","script/sub_modules/Brush.ts","script/Main.ts","app.js"],"names":[],"mappings":"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","file":"app.c328ef1a.map","sourceRoot":"../src","sourcesContent":["export const clamp = (n:number, max:number, min:number):number => {\n    if (typeof min !== 'number') min = 0;\n    return n > max ? max : n < min ? min : n;\n}\n\nexport const random = (max:number, min:number):number => {\n    if (typeof max !== 'number') {\n        return Math.random();\n    } else if (typeof min !== 'number') {\n        min = 0;\n    }\n    return Math.random() * (max - min) + min;\n}\n\nexport function getAdjustedPosition(x, y, target){\n    let rect = target.getBoundingClientRect();\n    let xx = Math.round(target.width * (x - rect.left) / target.clientWidth);\n    let yy = Math.round(target.height * (y - rect.top) / target.clientHeight);\n    return [xx, yy];\n}\n","import {random, clamp} from './util'\n\nexport class Brush{\n    private hairs: Hair[] = []\n    isTouch:boolean = false\n\n    constructor(\n        private size:number,\n        private amount:number,\n        private ctx:CanvasRenderingContext2D,\n    ){}\n    \n    down(x:number, y:number){\n        this.isTouch = true\n        const hairNum = this.size * 4\n        const rangeMax = this.size\n        for (let i = 0; i < hairNum; i++) {\n            const range = random(rangeMax, 0)\n            const dx = Math.sin(range) * range\n            const dy = Math.cos(range) * range\n            this.hairs[i] = new Hair(dx, dy, 3, this.amount * random(1, 0.5), this.ctx);\n        }\n        this.hairs.forEach( h => h.down(x,y) )\n    }\n\n    move(x:number, y:number){\n        if(this.isTouch) this.hairs.forEach( h => h.move(x,y) )\n    }\n\n    up(){\n        this.isTouch = false\n    }\n\n}\n\nclass Hair{\n    private x: number = 0\n    private y: number = 0\n\n    constructor(\n        private dx:number,\n        private dy:number,\n        private size:number,\n        private amount:number,\n        private ctx:CanvasRenderingContext2D,\n    ){}\n\n    down(parentX:number, parentY:number){\n        this.ctx.save()\n        this.x = parentX + this.dx\n        this.y = parentY + this.dy\n        const hsla = new HSLA(1,1,1,1)\n        this.ctx.fillStyle = hsla.toString()\n        this.ctx.beginPath()\n        this.ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false)\n        this.ctx.fill()\n        this.ctx.restore()\n    }\n\n    move(parentX:number, parentY:number) {\n        this.ctx.save()\n        const [oldX, oldY] = [this.x , this.y]\n        this.x = parentX + this.dx\n        this.y = parentY + this.dy\n        const hsla = new HSLA(1,1,1,1)\n        var speed = Hair.distance(oldX, oldY, this.x, this.y)\n        hsla.a = this.amount / speed\n        this.ctx.lineCap = 'round'\n        this.line(oldX, oldY, this.x, this.y, hsla, this.size/2)\n        hsla.a = clamp((1 - speed / this.amount) * 0.3, 0.3, 0)\n        this.ctx.lineCap = 'butt'\n        this.line(oldX, oldY, this.x, this.y, hsla, this.size)\n        this.ctx.restore()\n    }\n\n    private line(oldX:number, oldY:number, newX:number, newY:number, hsla:HSLA, width:number){\n        this.ctx.strokeStyle = hsla.toString()\n        this.ctx.lineWidth = width\n        this.ctx.beginPath()\n        this.ctx.moveTo(oldX, oldY)\n        this.ctx.lineTo(newX, newY)\n        this.ctx.stroke()\n    }\n\n    static distance(x1: number, y1:number, x2: number, y2:number): number{\n    　　return Math.sqrt(Math.pow(x1 - x2,2) + Math.pow(y1 - y2,2));\n    }\n}\n\nclass HSLA{\n    constructor(\n        public h:number,\n        public s:number,\n        public l:number,\n        public a:number,\n    ){}\n    toString(){\n        return 'hsla(' + this.h + ', ' + this.s + '%, ' + this.l + '%, ' + this.a + ')';\n    }\n}","import {Brush} from \"./sub_modules/Brush\"\nimport { getAdjustedPosition } from \"./sub_modules/util\"\n\nconst backgroundSrc = require('../base.jpg');\n\nconst start = () => {\n    const canvas = <HTMLCanvasElement> window.document.getElementById('canvas')\n    const ctx:CanvasRenderingContext2D = canvas.getContext(\"2d\")\n    const brush = new Brush(10, 15, ctx)\n    canvas.addEventListener('mousedown', (e:MouseEvent) =>{\n        const [x,y] = getAdjustedPosition(e.clientX, e.clientY, canvas)\n        brush.down(x , y)\n    })\n    canvas.addEventListener('mousemove' , (e:MouseEvent) =>{\n        const [x,y] = getAdjustedPosition(e.clientX, e.clientY, canvas)\n        brush.move(x , y)\n    })\n    canvas.addEventListener('mouseup' , (e:MouseEvent) =>{\n        brush.up()\n    })\n    canvas.addEventListener('mouseover' , (e:MouseEvent) =>{\n        brush.up()\n    })\n    canvas.addEventListener('touchstart', (e:TouchEvent) =>{\n        const touchObject = e.touches[0]\n        const [x,y] = getAdjustedPosition(touchObject.pageX, touchObject.pageY, canvas)\n        brush.down(x , y)\n    })\n    canvas.addEventListener('touchmove' , (e:TouchEvent) =>{\n        const touchObject = e.touches[0]\n        const [x,y] = getAdjustedPosition(touchObject.pageX, touchObject.pageY, canvas)\n        brush.move(x , y)\n    })\n    canvas.addEventListener('touchend' , (e:TouchEvent) =>{\n        brush.up()\n    })\n}\n\nconst finish = () => {\n    const canvas = <HTMLCanvasElement> window.document.getElementById('canvas')\n    const ctx:CanvasRenderingContext2D = canvas.getContext(\"2d\")\n    const drawData:string = canvas.toDataURL('image/png')\n    const background:HTMLImageElement = new Image();\n    background.addEventListener('load',()=>{\n        ctx.drawImage(background,0,0, 650, canvas.height)\n        const drawImg = new Image()\n        drawImg.addEventListener('load',()=>{\n            ctx.translate(220,60)\n            ctx.transform(0.4, 0, -0.05, 0.6, 50, 50)\n            ctx.rotate(5 * Math.PI / 180)\n            ctx.drawImage(drawImg, 100, 0)\n            var img:HTMLImageElement = document.getElementById(\"ret\") as HTMLImageElement\n            img.addEventListener('load',()=>{\n                canvas.style.display = 'none'\n                img.style.display = 'inline-block'\n                document.getElementById('end').style.display = 'none'\n                document.getElementById('message').style.display = 'inline'\n            })\n            img.src = canvas.toDataURL('image/png')\n        })\n        drawImg.src = drawData\n    })\n    background.src = backgroundSrc\n}\n \nconst main = () => {\n    start()\n    const button2 = <HTMLInputElement> window.document.getElementById('end')\n    button2.addEventListener('click' , () =>{\n        finish()\n    })\n}\n\nwindow.addEventListener(\"DOMContentLoaded\", main);","import \"./script/Main.ts\";"]}